<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>New Tab</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <img id="background" src="" alt="">
  <img id="background-next" src="" alt="">
  <video id="background-video" autoplay loop muted playsinline></video>
  <div id="overlay"></div>
  
  <div id="content">
    <div id="clock-wrapper" class="hover-wrapper">
      <div id="clock-date">
        <div id="clock"></div>
        <div id="date"></div>
      </div>
    </div>
    
    <div id="search-wrapper" class="hover-wrapper">
      <div id="search-container">
        <input type="text" id="search-input" placeholder="Search the web...">
      </div>
    </div>
    
    <div id="shortcuts-wrapper" class="hover-wrapper">
      <div id="shortcuts-container">
        <div id="shortcuts"></div>
      </div>
    </div>
    
    <!-- Weather widget -->
    <div id="weather-widget" class="hidden">
      <span id="weather-icon"></span>
      <span id="weather-text"></span>
    </div>
    
    <div id="wallpaper-info">
      <span id="wallpaper-title"></span>
      <span id="wallpaper-resolution"></span>
      <div id="wallpaper-controls">
        <button id="back-btn" title="Previous wallpaper (‚Üê)">‚óÄ</button>
        <button id="download-btn" title="Download wallpaper (D)">‚¨á</button>
        <button id="favorite-btn" title="Add to favorites (F)">‚ô°</button>
        <button id="blacklist-btn" title="Don't show again (B)">‚úï</button>
        <button id="search-wallpapers-btn" title="Search wallpapers">üîç</button>
        <button id="color-filter-btn" title="Filter by color">üé®</button>
        <button id="refresh-btn" title="New wallpaper (R)">‚Üª</button>
        <button id="settings-btn" title="Settings">‚öô</button>
      </div>
    </div>
  </div>
  
  <!-- Toast notification -->
  <div id="toast" class="toast hidden"></div>
  
  <div id="loading">
    <div class="spinner"></div>
    <p>Loading wallpaper...</p>
  </div>

  <!-- Wallpaper Settings Modal -->
  <div id="settings-modal" class="modal hidden">
    <div class="modal-content modal-wide">
      <h3>Wallpaper Settings</h3>
      
      <div class="modal-scroll-content">
      <div class="form-group form-checkbox zen-mode-toggle">
        <label>
          <input type="checkbox" id="settings-zen-mode">
          <span>üßò Zen Mode</span>
        </label>
        <small class="form-hint">Hide all UI elements until you move your mouse</small>
      </div>
      
      <div class="form-group">
        <label for="settings-subreddit">Subreddits</label>
        <div class="subreddit-input-wrapper">
          <input type="text" id="settings-subreddit" placeholder="EarthPorn, SpacePorn, CityPorn" autocomplete="off">
          <div id="recent-subreddits" class="recent-dropdown hidden"></div>
        </div>
        <small class="form-hint">Separate multiple subreddits with commas</small>
      </div>
      <div class="form-group">
        <label for="settings-sort">Sort by</label>
        <select id="settings-sort">
          <option value="hot">Hot</option>
          <option value="top">Top</option>
          <option value="new">New</option>
        </select>
      </div>
      <div class="form-group" id="time-period-group">
        <label for="settings-time">Time period</label>
        <select id="settings-time">
          <option value="day">Today</option>
          <option value="week">This Week</option>
          <option value="month">This Month</option>
          <option value="year">This Year</option>
          <option value="all">All Time</option>
        </select>
      </div>
      <div class="form-group">
        <label for="settings-resolution">Minimum resolution width</label>
        <select id="settings-resolution">
          <option value="0">Any (no filter)</option>
          <option value="1280">1280px (HD)</option>
          <option value="1920">1920px (Full HD)</option>
          <option value="2560">2560px (2K)</option>
          <option value="3840">3840px (4K)</option>
        </select>
        <small class="form-hint">Filter out images smaller than this width</small>
      </div>
      <div class="form-group form-checkbox">
        <label>
          <input type="checkbox" id="settings-nsfw">
          <span>Allow NSFW content</span>
        </label>
      </div>
      
      <h4 class="settings-section">Media Types</h4>
      <div class="form-group media-type-options">
        <label class="media-option">
          <input type="checkbox" id="settings-images" checked>
          <span>Images</span>
        </label>
        <label class="media-option">
          <input type="checkbox" id="settings-gifs" checked>
          <span>GIFs</span>
        </label>
        <label class="media-option">
          <input type="checkbox" id="settings-videos" checked>
          <span>Videos</span>
        </label>
      </div>
      
      <h4 class="settings-section">Slideshow</h4>
      <div class="form-group">
        <label for="settings-slideshow">Auto-change wallpaper</label>
        <select id="settings-slideshow">
          <option value="0">Off</option>
          <option value="1">Every 1 minute</option>
          <option value="5">Every 5 minutes</option>
          <option value="10">Every 10 minutes</option>
          <option value="30">Every 30 minutes</option>
          <option value="60">Every hour</option>
        </select>
      </div>
      <div class="form-group form-checkbox">
        <label>
          <input type="checkbox" id="settings-favorites-only">
          <span>Only show favorites in slideshow</span>
        </label>
      </div>
      
      <h4 class="settings-section">Clock & Date Format</h4>
      <div class="form-group">
        <label for="settings-clock-format">Clock format</label>
        <select id="settings-clock-format">
          <option value="24h">24-hour (14:30)</option>
          <option value="24h-seconds">24-hour with seconds (14:30:45)</option>
          <option value="12h">12-hour (2:30 PM)</option>
          <option value="12h-seconds">12-hour with seconds (2:30:45 PM)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="settings-date-format">Date format</label>
        <select id="settings-date-format">
          <option value="long">Monday, January 1, 2024</option>
          <option value="short">Mon, Jan 1, 2024</option>
          <option value="numeric">01/01/2024</option>
          <option value="iso">2024-01-01</option>
        </select>
      </div>
      
      <h4 class="settings-section">Weather</h4>
      <div class="form-group form-checkbox">
        <label>
          <input type="checkbox" id="settings-weather-enabled">
          <span>Show weather widget</span>
        </label>
      </div>
      <div class="form-group">
        <label for="settings-weather-location">Location (City name)</label>
        <div class="input-with-button">
          <input type="text" id="settings-weather-location" placeholder="New York, London, Tokyo...">
          <button type="button" id="detect-location-btn" class="btn btn-secondary btn-small" title="Detect my location">üìç</button>
        </div>
        <small class="form-hint">Enter a city name or click üìç to detect automatically</small>
      </div>
      <div class="form-group">
        <label for="settings-weather-units">Temperature units</label>
        <select id="settings-weather-units">
          <option value="celsius">Celsius (¬∞C)</option>
          <option value="fahrenheit">Fahrenheit (¬∞F)</option>
        </select>
      </div>
      
      <h4 class="settings-section">Scheduled Subreddits</h4>
      <div class="form-group form-checkbox">
        <label>
          <input type="checkbox" id="settings-scheduled-enabled">
          <span>Enable scheduled subreddits</span>
        </label>
        <small class="form-hint">Use different subreddits at different times of day</small>
      </div>
      <div id="scheduled-subreddits-list" class="scheduled-list">
        <!-- Scheduled items will be added here -->
      </div>
      <button type="button" id="add-scheduled-btn" class="btn btn-secondary btn-small">+ Add Time Slot</button>
      
      <h4 class="settings-section">Show on Hover Only</h4>
      <div class="form-group hover-options">
        <label class="hover-option">
          <input type="checkbox" id="hover-clock">
          <span>Clock & Date</span>
        </label>
        <label class="hover-option">
          <input type="checkbox" id="hover-search">
          <span>Search Bar</span>
        </label>
        <label class="hover-option">
          <input type="checkbox" id="hover-shortcuts">
          <span>Shortcuts</span>
        </label>
        <label class="hover-option">
          <input type="checkbox" id="hover-wallpaper-info">
          <span>Bottom Bar</span>
        </label>
      </div>
      <small class="form-hint">Checked elements will be hidden until you move your mouse</small>
      
      <h4 class="settings-section">Favorites & Cache</h4>
      <div class="form-group form-group-row">
        <button id="view-favorites-btn" class="btn btn-secondary">Favorites</button>
        <button id="view-cached-btn" class="btn btn-secondary">Cached</button>
        <button id="view-blacklist-btn" class="btn btn-secondary">Blacklist</button>
      </div>
      </div>
      
      <div class="modal-buttons modal-buttons-sticky">
        <button id="settings-cancel" class="btn btn-secondary">Cancel</button>
        <button id="settings-save" class="btn btn-primary">Save & Refresh</button>
      </div>
    </div>
  </div>

  <!-- Edit Shortcut Modal -->
  <div id="edit-modal" class="modal hidden">
    <div class="modal-content">
      <h3 id="modal-title">Edit Shortcut</h3>
      <div class="form-group">
        <label for="edit-name">Name</label>
        <input type="text" id="edit-name" placeholder="Shortcut name">
      </div>
      <div class="form-group">
        <label for="edit-url">URL</label>
        <input type="url" id="edit-url" placeholder="https://example.com">
      </div>
      <div class="modal-buttons">
        <button id="modal-remove" class="btn btn-danger">Remove</button>
        <div class="modal-buttons-right">
          <button id="modal-cancel" class="btn btn-secondary">Cancel</button>
          <button id="modal-save" class="btn btn-primary">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Favorites Modal -->
  <div id="favorites-modal" class="modal hidden">
    <div class="modal-content modal-wide">
      <h3>Favorite Wallpapers</h3>
      <div id="favorites-grid" class="favorites-grid"></div>
      <div id="no-favorites" class="no-favorites hidden">
        <p>No favorites yet! Click the ‚ô° button on a wallpaper to save it.</p>
      </div>
      <div class="modal-buttons">
        <button id="favorites-close" class="btn btn-secondary">Close</button>
      </div>
    </div>
  </div>

  <!-- Cached Wallpapers Modal -->
  <div id="cached-modal" class="modal hidden">
    <div class="modal-content modal-wide">
      <h3>Cached Wallpapers <span id="cached-count"></span></h3>
      <div id="cached-grid" class="favorites-grid"></div>
      <div id="no-cached" class="no-favorites hidden">
        <p>No cached wallpapers. Open a new tab to fetch some!</p>
      </div>
      <div class="modal-buttons">
        <button id="clear-cache-btn" class="btn btn-danger">Clear Cache</button>
        <button id="cached-close" class="btn btn-secondary">Close</button>
      </div>
    </div>
  </div>

  <!-- Blacklisted Wallpapers Modal -->
  <div id="blacklist-modal" class="modal hidden">
    <div class="modal-content modal-wide">
      <h3>Blacklisted Wallpapers <span id="blacklist-count"></span></h3>
      <div id="blacklist-grid" class="favorites-grid"></div>
      <div id="no-blacklist" class="no-favorites hidden">
        <p>No blacklisted wallpapers.</p>
      </div>
      <div class="modal-buttons">
        <button id="clear-blacklist-btn" class="btn btn-danger">Clear Blacklist</button>
        <button id="blacklist-close" class="btn btn-secondary">Close</button>
      </div>
    </div>
  </div>

  <!-- Search Subreddit Modal -->
  <div id="search-modal" class="modal hidden">
    <div class="modal-content modal-wide">
      <h3>Search Subreddit</h3>
      <div class="form-group">
        <label for="search-query">Search for wallpapers</label>
        <input type="text" id="search-query" placeholder="sunset, mountains, ocean...">
        <small class="form-hint">Search within current subreddit(s)</small>
      </div>
      <div class="modal-buttons">
        <button id="search-cancel" class="btn btn-secondary">Cancel</button>
        <button id="search-submit" class="btn btn-primary">Search</button>
      </div>
      <div id="search-results" class="search-results-grid"></div>
    </div>
  </div>

  <!-- Color Filter Modal -->
  <div id="color-filter-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Filter by Color</h3>
      <p class="color-filter-desc">Select a color to filter wallpapers by their dominant color</p>
      <div class="color-grid">
        <button class="color-btn" data-color="red" style="background: #e74c3c;" title="Red"></button>
        <button class="color-btn" data-color="orange" style="background: #e67e22;" title="Orange"></button>
        <button class="color-btn" data-color="yellow" style="background: #f1c40f;" title="Yellow"></button>
        <button class="color-btn" data-color="green" style="background: #27ae60;" title="Green"></button>
        <button class="color-btn" data-color="teal" style="background: #1abc9c;" title="Teal"></button>
        <button class="color-btn" data-color="blue" style="background: #3498db;" title="Blue"></button>
        <button class="color-btn" data-color="purple" style="background: #9b59b6;" title="Purple"></button>
        <button class="color-btn" data-color="pink" style="background: #e91e63;" title="Pink"></button>
        <button class="color-btn" data-color="brown" style="background: #795548;" title="Brown"></button>
        <button class="color-btn" data-color="gray" style="background: #95a5a6;" title="Gray"></button>
        <button class="color-btn" data-color="black" style="background: #2c3e50;" title="Dark"></button>
        <button class="color-btn" data-color="white" style="background: #ecf0f1; border: 1px solid #bdc3c7;" title="Light"></button>
      </div>
      <div id="current-color-filter" class="current-filter hidden">
        <span>Active filter: <strong id="active-color-name"></strong></span>
        <button id="clear-color-filter" class="btn btn-small btn-danger">Clear</button>
      </div>
      <div class="modal-buttons">
        <button id="color-filter-close" class="btn btn-secondary">Close</button>
      </div>
    </div>
  </div>

  <script src="newtab.js"></script>
</body>
</html>
